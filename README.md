# HighwayDelite Notes App

This is my full‑stack TypeScript project: React + Vite on the client and Express + MongoDB on the server. Here’s how I set it up, how I run it locally, and how I build it for production.

## What’s inside
- **client/**: React (Vite, TypeScript, TailwindCSS)
- **server/**: Express (TypeScript), MongoDB, Passport Google OAuth, JWT

## What you’ll need
- **Node.js** 18+ and **npm** 9+
- **MongoDB** running locally or a cloud connection string (e.g., MongoDB Atlas)
- Google OAuth 2.0 credentials (if you plan to use Google login)

## Environment setup

### Server (`server/.env`)
I keep a `.env` file in `server/` with:
```
PORT=5000
MONGODB_URI=mongodb://localhost:27017/mynotes
JWT_SECRET=replace-with-a-strong-secret
# Frontend URL used for OAuth redirect
FRONTEND_URL=http://localhost:5173

# Google OAuth (required for Google login)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret
```
Notes I keep in mind:
- `JWT_SECRET` is also used as the session secret in `express-session`.
- `FRONTEND_URL` defaults to `http://localhost:3000` inside the server code if not set, but the client runs on `5173` by default. Set it to `http://localhost:5173` for local dev.

### Client (`client/.env.local`)
For the client, I use a `client/.env.local` (Vite style):
```
VITE_API_URL=http://localhost:5000/api
```
Note:
- The client uses `VITE_API_URL` with a fallback to `http://localhost:5000/api`. If your server runs elsewhere, update this.

## Install
I install dependencies in each folder:

- Client
  ```bash
  npm install
  ```
- Server
  ```bash
  npm install
  ```

I usually run those in separate terminals from within each folder.

## Run it locally (development)
I use two terminals:

- **Terminal 1 – Server** (`server/`):
  - Using ts-node (no build):
    ```bash
    npx ts-node src/index.ts
    ```
  - Or with live-reload via nodemon:
    ```bash
    npx nodemon src/index.ts
    ```
  Server starts on `http://localhost:5000` (configurable via `PORT`).

- **Terminal 2 – Client** (`client/`):
  ```bash
  npm run dev
  ```
  Client runs on `http://localhost:5173` by default (Vite).

CORS is preconfigured on the server to allow `http://localhost:5173` and `http://localhost:5174` with credentials.

## Build for production

- **Client build** (`client/`):
  ```bash
  npm run build
  ```
  - Output is generated by Vite (see `dist/`).
  - You can preview locally:
    ```bash
    npm run preview
    ```

- **Server build** (`server/`):
  ```bash
  npx tsc
  node dist/index.js
  ```
  - TypeScript compiles to `dist/` per `server/tsconfig.json`.

## Google login (optional)
- Create OAuth 2.0 credentials in Google Cloud Console.
- Set authorized JavaScript origins and redirect URIs:
  - Origin: `http://localhost:5173`
  - Redirect URI: `http://localhost:5000/api/auth/google/callback`
- Make sure `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET`, and `FRONTEND_URL` are set in `server/.env`.

On successful login, the server redirects to:
```
{FRONTEND_URL}/auth/callback?token=<jwt>
```
Make sure your client handles that route.

## Gotchas (things that tripped me up)
- **MongoDB connection issues**: verify `MONGODB_URI`, that MongoDB is running, and that your IP is allow-listed (for Atlas).
- **CORS errors**: confirm `FRONTEND_URL` matches the client origin and that it’s included in server CORS config.
- **OAuth callback mismatch**: the Google Console redirect URI must exactly match `/api/auth/google/callback`.
- **Port conflicts**: change `PORT` or Vite’s port via `npm run dev -- --port 5174` and update CORS/env accordingly.

## Scripts I use
- Client
  - `npm run dev` – start Vite dev server
  - `npm run build` – type-check + build
  - `npm run preview` – preview production build
  - `npm run lint` – lint the codebase
- Server
  - No scripts defined. Use:
    - `npx ts-node src/index.ts` for direct run
    - `npx nodemon src/index.ts` for hot reload
    - `npx tsc && node dist/index.js` for production

## License
This project is for educational purposes. Add a license if you plan to distribute.

